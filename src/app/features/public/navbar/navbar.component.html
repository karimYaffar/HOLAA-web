<!-- Top Social Bar -->
<div class="w-full bg-[#E91E63] text-white py-2">
  <div class="container mx-auto px-4 flex justify-between items-center">
    <div class="flex gap-4">
      <a
        href="https://instagram.com"
        target="_blank"
        class="hover:opacity-80 transition-opacity"
      >
        <svg
          xmlns="http://www.w3.org/2000/svg"
          width="24"
          height="24"
          viewBox="0 0 256 256"
        >
          <g fill="none">
            <rect
              width="256"
              height="256"
              fill="url(#skillIconsInstagram0)"
              rx="60"
            />
            <rect
              width="256"
              height="256"
              fill="url(#skillIconsInstagram1)"
              rx="60"
            />
            <path
              fill="#fff"
              d="M128.009 28c-27.158 0-30.567.119-41.233.604c-10.646.488-17.913 2.173-24.271 4.646c-6.578 2.554-12.157 5.971-17.715 11.531c-5.563 5.559-8.98 11.138-11.542 17.713c-2.48 6.36-4.167 13.63-4.646 24.271c-.477 10.667-.602 14.077-.602 41.236s.12 30.557.604 41.223c.49 10.646 2.175 17.913 4.646 24.271c2.556 6.578 5.973 12.157 11.533 17.715c5.557 5.563 11.136 8.988 17.709 11.542c6.363 2.473 13.631 4.158 24.275 4.646c10.667.485 14.073.604 41.23.604c27.161 0 30.559-.119 41.225-.604c10.646-.488 17.921-2.173 24.284-4.646c6.575-2.554 12.146-5.979 17.702-11.542c5.563-5.558 8.979-11.137 11.542-17.712c2.458-6.361 4.146-13.63 4.646-24.272c.479-10.666.604-14.066.604-41.225s-.125-30.567-.604-41.234c-.5-10.646-2.188-17.912-4.646-24.27c-2.563-6.578-5.979-12.157-11.542-17.716c-5.562-5.562-11.125-8.979-17.708-11.53c-6.375-2.474-13.646-4.16-24.292-4.647c-10.667-.485-14.063-.604-41.23-.604zm-8.971 18.021c2.663-.004 5.634 0 8.971 0c26.701 0 29.865.096 40.409.575c9.75.446 15.042 2.075 18.567 3.444c4.667 1.812 7.994 3.979 11.492 7.48c3.5 3.5 5.666 6.833 7.483 11.5c1.369 3.52 3 8.812 3.444 18.562c.479 10.542.583 13.708.583 40.396s-.104 29.855-.583 40.396c-.446 9.75-2.075 15.042-3.444 18.563c-1.812 4.667-3.983 7.99-7.483 11.488c-3.5 3.5-6.823 5.666-11.492 7.479c-3.521 1.375-8.817 3-18.567 3.446c-10.542.479-13.708.583-40.409.583c-26.702 0-29.867-.104-40.408-.583c-9.75-.45-15.042-2.079-18.57-3.448c-4.666-1.813-8-3.979-11.5-7.479s-5.666-6.825-7.483-11.494c-1.369-3.521-3-8.813-3.444-18.563c-.479-10.542-.575-13.708-.575-40.413s.096-29.854.575-40.396c.446-9.75 2.075-15.042 3.444-18.567c1.813-4.667 3.983-8 7.484-11.5s6.833-5.667 11.5-7.483c3.525-1.375 8.819-3 18.569-3.448c9.225-.417 12.8-.542 31.437-.563zm62.351 16.604c-6.625 0-12 5.37-12 11.996c0 6.625 5.375 12 12 12s12-5.375 12-12s-5.375-12-12-12zm-53.38 14.021c-28.36 0-51.354 22.994-51.354 51.355s22.994 51.344 51.354 51.344c28.361 0 51.347-22.983 51.347-51.344c0-28.36-22.988-51.355-51.349-51.355zm0 18.021c18.409 0 33.334 14.923 33.334 33.334c0 18.409-14.925 33.334-33.334 33.334s-33.333-14.925-33.333-33.334c0-18.411 14.923-33.334 33.333-33.334"
            />
            <defs>
              <radialGradient
                id="skillIconsInstagram0"
                cx="0"
                cy="0"
                r="1"
                gradientTransform="matrix(0 -253.715 235.975 0 68 275.717)"
                gradientUnits="userSpaceOnUse"
              >
                <stop stop-color="#fd5" />
                <stop offset=".1" stop-color="#fd5" />
                <stop offset=".5" stop-color="#ff543e" />
                <stop offset="1" stop-color="#c837ab" />
              </radialGradient>
              <radialGradient
                id="skillIconsInstagram1"
                cx="0"
                cy="0"
                r="1"
                gradientTransform="matrix(22.25952 111.2061 -458.39518 91.75449 -42.881 18.441)"
                gradientUnits="userSpaceOnUse"
              >
                <stop stop-color="#3771c8" />
                <stop offset=".128" stop-color="#3771c8" />
                <stop offset="1" stop-color="#60f" stop-opacity="0" />
              </radialGradient>
            </defs>
          </g>
        </svg>
      </a>
      <a
        href="https://wa.me/7715256870"
        target="_blank"
        class="hover:opacity-80 transition-opacity"
      >
        <svg
          xmlns="http://www.w3.org/2000/svg"
          width="24"
          height="24"
          viewBox="0 0 256 258"
        >
          <defs>
            <linearGradient
              id="logosWhatsappIcon0"
              x1="50%"
              x2="50%"
              y1="100%"
              y2="0%"
            >
              <stop offset="0%" stop-color="#1faf38" />
              <stop offset="100%" stop-color="#60d669" />
            </linearGradient>
            <linearGradient
              id="logosWhatsappIcon1"
              x1="50%"
              x2="50%"
              y1="100%"
              y2="0%"
            >
              <stop offset="0%" stop-color="#f9f9f9" />
              <stop offset="100%" stop-color="#fff" />
            </linearGradient>
          </defs>
          <path
            fill="url(#logosWhatsappIcon0)"
            d="M5.463 127.456c-.006 21.677 5.658 42.843 16.428 61.499L4.433 252.697l65.232-17.104a123 123 0 0 0 58.8 14.97h.054c67.815 0 123.018-55.183 123.047-123.01c.013-32.867-12.775-63.773-36.009-87.025c-23.23-23.25-54.125-36.061-87.043-36.076c-67.823 0-123.022 55.18-123.05 123.004"
          />
          <path
            fill="url(#logosWhatsappIcon1)"
            d="M1.07 127.416c-.007 22.457 5.86 44.38 17.014 63.704L0 257.147l67.571-17.717c18.618 10.151 39.58 15.503 60.91 15.511h.055c70.248 0 127.434-57.168 127.464-127.423c.012-34.048-13.236-66.065-37.3-90.15C194.633 13.286 162.633.014 128.536 0C58.276 0 1.099 57.16 1.071 127.416m40.24 60.376l-2.523-4.005c-10.606-16.864-16.204-36.352-16.196-56.363C22.614 69.029 70.138 21.52 128.576 21.52c28.3.012 54.896 11.044 74.9 31.06c20.003 20.018 31.01 46.628 31.003 74.93c-.026 58.395-47.551 105.91-105.943 105.91h-.042c-19.013-.01-37.66-5.116-53.922-14.765l-3.87-2.295l-40.098 10.513z"
          />
          <path
            fill="#fff"
            d="M96.678 74.148c-2.386-5.303-4.897-5.41-7.166-5.503c-1.858-.08-3.982-.074-6.104-.074c-2.124 0-5.575.799-8.492 3.984c-2.92 3.188-11.148 10.892-11.148 26.561s11.413 30.813 13.004 32.94c1.593 2.123 22.033 35.307 54.405 48.073c26.904 10.609 32.379 8.499 38.218 7.967c5.84-.53 18.844-7.702 21.497-15.139c2.655-7.436 2.655-13.81 1.859-15.142c-.796-1.327-2.92-2.124-6.105-3.716s-18.844-9.298-21.763-10.361c-2.92-1.062-5.043-1.592-7.167 1.597c-2.124 3.184-8.223 10.356-10.082 12.48c-1.857 2.129-3.716 2.394-6.9.801c-3.187-1.598-13.444-4.957-25.613-15.806c-9.468-8.442-15.86-18.867-17.718-22.056c-1.858-3.184-.199-4.91 1.398-6.497c1.431-1.427 3.186-3.719 4.78-5.578c1.588-1.86 2.118-3.187 3.18-5.311c1.063-2.126.531-3.986-.264-5.579c-.798-1.593-6.987-17.343-9.819-23.64"
          />
        </svg>
      </a>
      <a
        href="https://www.facebook.com/holaatrendy"
        target="_blank"
        class="hover:opacity-80 transition-opacity"
      >
        <svg
          xmlns="http://www.w3.org/2000/svg"
          width="24"
          height="24"
          viewBox="0 0 256 256"
        >
          <path
            fill="#1877f2"
            d="M256 128C256 57.308 198.692 0 128 0S0 57.308 0 128c0 63.888 46.808 116.843 108 126.445V165H75.5v-37H108V99.8c0-32.08 19.11-49.8 48.348-49.8C170.352 50 185 52.5 185 52.5V84h-16.14C152.959 84 148 93.867 148 103.99V128h35.5l-5.675 37H148v89.445c61.192-9.602 108-62.556 108-126.445"
          />
          <path
            fill="#fff"
            d="m177.825 165l5.675-37H148v-24.01C148 93.866 152.959 84 168.86 84H185V52.5S170.352 50 156.347 50C127.11 50 108 67.72 108 99.8V128H75.5v37H108v89.445A129 129 0 0 0 128 256a129 129 0 0 0 20-1.555V165z"
          />
        </svg>
      </a>
    </div>
    <div class="flex items-center">
      <a
        href="#"
        class="text-white hover:opacity-80 transition-opacity flex items-center gap-2"
      >
        <svg
          xmlns="http://www.w3.org/2000/svg"
          class="w-5 h-5"
          viewBox="0 0 24 24"
        >
          <path
            fill="#fff"
            d="M12 2c5.523 0 10 4.477 10 10s-4.477 10-10 10H2l2.929-2.929A9.97 9.97 0 0 1 2 12C2 6.477 6.477 2 12 2m4 11H8a4 4 0 0 0 8 0"
          />
        </svg>
        <span>Ayuda</span>
      </a>
    </div>
  </div>
</div>

<!-- Main Navbar -->
<nav class="bg-white border-b border-[#E0E0E0] sticky top-0 z-50">
  <div class="container mx-auto px-4">
    <div class="flex items-center justify-between h-24">
      <!-- Logo -->
      <a
        routerLink="/"
        class="flex-shrink-0 transform hover:scale-105 transition-transform duration-200"
      >
        <img
          src="./assets/webp/logo.webp"
          alt="HOLAA Trendy"
          class="h-16 md:h-20 me-5"
        />
      </a>

      <!-- Navigation Links -->
      <div class="hidden lg:flex items-center space-x-10">
        <a
          routerLink="/mas-vendidos"
          class="flex items-center text-[#000000] hover:text-[#E91E63] transition-colors text-lg cursor-pointer"
        >
          <svg
            class="w-6 h-6 mr-2"
            fill="none"
            stroke="currentColor"
            viewBox="0 0 24 24"
          >
            <path
              stroke-linecap="round"
              stroke-linejoin="round"
              stroke-width="2"
              d="M5 3v4M3 5h4M6 17v4m-2-2h4m5-16l2.286 6.857L21 12l-5.714 2.143L13 21l-2.286-6.857L5 12l5.714-2.143L13 3z"
            ></path>
          </svg>
          Mas vendidos
        </a>
        <a
          routerLink="/mega-ofertas"
          class="flex items-center text-[#000000] hover:text-[#E91E63] transition-colors text-lg cursor-pointer"
        >
          <svg
            class="w-6 h-6 mr-2"
            fill="none"
            stroke="currentColor"
            viewBox="0 0 24 24"
          >
            <path
              stroke-linecap="round"
              stroke-linejoin="round"
              stroke-width="2"
              d="M12 8v13m0-13V6a2 2 0 112 2h-2zm0 0V5.5A2.5 2.5 0 109.5 8H12zm-7 4h14M5 12a2 2 0 110-4h14a2 2 0 110 4M5 12v7a2 2 0 002 2h10a2 2 0 002-2v-7"
            ></path>
          </svg>
          Mega ofertas
        </a>
        <a
          routerLink="/recien-llegados"
          class="flex items-center text-[#000000] hover:text-[#E91E63] transition-colors text-lg cursor-pointer"
        >
          <svg
            class="w-6 h-6 mr-2"
            fill="none"
            stroke="currentColor"
            viewBox="0 0 24 24"
          >
            <path
              stroke-linecap="round"
              stroke-linejoin="round"
              stroke-width="2"
              d="M5 3v4M3 5h4M6 17v4m-2-2h4m5-16l2.286 6.857L21 12l-5.714 2.143L13 21l-2.286-6.857L5 12l5.714-2.143L13 3z"
            ></path>
          </svg>
          Recién Llegados
        </a>
        <div class="relative group">
          <button
            (click)="toggleDropdown()"
            (blur)="isDropdownOpen = false"
            class="flex items-center text-[#000000] hover:text-[#E91E63] transition-colors text-lg"
          >
            <svg
              class="w-6 h-6 mr-2"
              fill="none"
              stroke="currentColor"
              viewBox="0 0 24 24"
            >
              <path
                stroke-linecap="round"
                stroke-linejoin="round"
                stroke-width="2"
                d="M4 6h16M4 12h16M4 18h16"
              ></path>
            </svg>
            Categorías
            <svg
              class="w-4 h-4 ml-1 transform transition-transform"
              fill="none"
              [ngClass]="{ 'rotate-180': isDropdownOpen }"
              stroke="currentColor"
              viewBox="0 0 24 24"
            >
              <path
                stroke-linecap="round"
                stroke-linejoin="round"
                stroke-width="2"
                d="M19 9l-7 7-7-7"
              ></path>
            </svg>
          </button>
          <div
            *ngIf="isDropdownOpen"
            [@dropdownAnimation]
            class="absolute z-50 mt-2 w-56 rounded-md shadow-lg bg-white ring-1 ring-black ring-opacity-5 focus:outline-none"
            role="menu"
            aria-orientation="vertical"
            aria-labelledby="categories-menu"
          >
            <div class="py-1" role="none">
              <a
                *ngFor="let category of categories"
                href="{{ category.link }}"
                class="flex items-center px-4 py-2 text-sm text-gray-700 hover:bg-[#E91E63] hover:text-white transition-colors duration-200"
                role="menuitem"
              >
                <span class="mr-2">{{ category.icon }}</span>
                {{ category.name }}
              </a>
            </div>
          </div>
        </div>
      </div>

      <div class="flex-1 max-w-2xl mx-10 relative">
        <div class="relative">
          <input
            #searchInput
            type="text"
            [(ngModel)]="keyword"
            (keyup)="onSearch()"
            (focus)="onFocus()"
            (blur)="onBlur()"
            placeholder="¿Qué necesitas hoy? 😊"
            class="w-full px-5 py-3 rounded-full border-2 border-[#E0E0E0] focus:border-[#E91E63] focus:outline-none text-lg"
          />
          <button
            (click)="onSearch()"
            class="absolute right-4 top-1/2 transform -translate-y-1/2 text-[#E91E63] hover:text-[#000000] transition-colors"
          >
            <svg
              class="w-6 h-6"
              fill="none"
              stroke="currentColor"
              viewBox="0 0 24 24"
            >
              <path
                stroke-linecap="round"
                stroke-linejoin="round"
                stroke-width="2"
                d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"
              ></path>
            </svg>
          </button>
        </div>

        <!-- Enhanced Search Results Dropdown with Animation -->
        <div
          *ngIf="showResults && products.length > 0"
          [@slideInOut]
          class="absolute z-100 w-full mt-2 bg-white rounded-lg shadow-lg max-h-[70vh] overflow-y-auto overflow-x-hidden"
        >
          <div
            class="sticky top-0 bg-[#E91E63] text-white py-2 px-4 font-semibold"
          >
            Resultados de búsqueda
          </div>
          <div
            *ngFor="let product of products"
            class="p-4 hover:bg-gray-100 cursor-pointer transition-all duration-200 border-b border-gray-200 last:border-b-0"
            (mouseenter)="onProductHover(product)"
            (mouseleave)="onProductLeave()"
          >
            <div class="flex items-center">
              <div class="relative w-20 h-20 mr-4 overflow-hidden rounded-lg group">
                <img
                  [src]="product.imgUri"
                  alt="{{ product.name }}"
                  class="w-full h-full object-cover transition-transform duration-300 group-hover:scale-110"
                />
                <div
                  class="absolute inset-0 bg-black bg-opacity-20 opacity-0 group-hover:opacity-100 transition-opacity duration-300"
                ></div>
              </div>
              <div class="flex-grow">
                <h3 class="text-lg font-semibold text-gray-800 mb-1">
                  {{ product.name }}
                </h3>
                <p class="text-[#E91E63] font-bold">{{ product.price }}</p>
              </div>
              <div
                class="text-gray-400 hover:text-[#E91E63] transition-colors duration-200"
              >
                <svg
                  xmlns="http://www.w3.org/2000/svg"
                  class="h-6 w-6"
                  fill="none"
                  viewBox="0 0 24 24"
                  stroke="currentColor"
                >
                  <path
                    stroke-linecap="round"
                    stroke-linejoin="round"
                    stroke-width="2"
                    d="M9 5l7 7-7 7"
                  />
                </svg>
              </div>
            </div>
          </div>
          <div class="sticky bottom-0 bg-gray-100 py-2 px-4 text-center">
            <a href="#" class="text-[#E91E63] hover:underline font-medium"
              >Ver todos los resultados</a
            >
          </div>
        </div>
      </div>

      <!-- Right Icons -->
      <div class="flex items-center space-x-8">
        <div class="relative group">
          <a
            routerLink="/login"
            class="text-[#000000] hover:text-[#E91E63] transition-colors cursor-pointer"
          >
            <svg
              xmlns="http://www.w3.org/2000/svg"
              fill="none"
              viewBox="0 0 24 24"
              class="w-7 h-7"
              stroke="currentColor"
            >
              <path
                stroke-linecap="round"
                stroke-linejoin="round"
                stroke-width="2"
                d="M6.578 15.482c-1.415.842-5.125 2.562-2.865 4.715C4.816 21.248 6.045 22 7.59 22h8.818c1.546 0 2.775-.752 3.878-1.803c2.26-2.153-1.45-3.873-2.865-4.715a10.66 10.66 0 0 0-10.844 0M16.5 6.5a4.5 4.5 0 1 1-9 0a4.5 4.5 0 0 1 9 0"
              />
            </svg>
          </a>

          <!-- Menú desplegable -->
          <div
            *ngIf="isAuthenticated"
            class="absolute right-0 mt-2 w-48 bg-white rounded-md shadow-lg py-1 z-10 invisible group-hover:visible opacity-0 group-hover:opacity-100 transition-all duration-300 transform scale-95 group-hover:scale-100"
          >
            <a
              routerLink="/profile"
              class="block px-4 py-2 text-sm text-gray-700 hover:bg-[#E91E63] hover:text-white transition-colors"
            >
              Ver Perfil
            </a>
            <button
              (click)="logout()"
              class="w-full text-left px-4 py-2 text-sm text-gray-700 hover:bg-[#E91E63] hover:text-white transition-colors"
            >
              Cerrar Sesión
            </button>
          </div>
        </div>
        <a
          routerLink="/wishlist"
          class="text-[#000000] hover:text-[#E91E63] transition-colors"
        >
          <svg
            xmlns="http://www.w3.org/2000/svg"
            class="w-7 h-7"
            viewBox="0 0 24 24"
            stroke="currentColor"
            fill="none"
          >
            <path
              stroke-linecap="round"
              stroke-linejoin="round"
              stroke-width="2"
              d="M19.463 3.994c-2.682-1.645-5.023-.982-6.429.074c-.576.433-.864.65-1.034.65s-.458-.217-1.034-.65C9.56 3.012 7.219 2.349 4.537 3.994C1.018 6.153.222 13.274 8.34 19.284C9.886 20.427 10.659 21 12 21s2.114-.572 3.66-1.717c8.118-6.008 7.322-13.13 3.803-15.289"
            />
          </svg>
        </a>
        <a
          routerLink="/cart"
          class="text-[#000000] hover:text-[#E91E63] transition-colors relative"
        >
          <svg
            xmlns="http://www.w3.org/2000/svg"
            class="w-7 h-7"
            viewBox="0 0 24 24"
            stroke="currentColor"
            fill="none"
          >
            <g stroke-linecap="round" stroke-linejoin="round" stroke-width="2">
              <path
                d="m3.062 15.193l.365-2.071c.432-2.448.647-3.672 1.502-4.397S7.012 8 9.467 8h5.066c2.455 0 3.683 0 4.538.725s1.07 1.949 1.502 4.397l.365 2.071c.598 3.388.896 5.082-.023 6.195c-.92 1.112-2.62 1.112-6.017 1.112H9.102c-3.398 0-5.097 0-6.017-1.113s-.62-2.806-.023-6.194M7.5 8l.168-2.014a4.347 4.347 0 0 1 8.664 0L16.5 8"
              />
              <path d="M15 11c-.13 1.413-1.434 2.5-3 2.5S9.13 12.413 9 11" />
            </g>
          </svg>
          <span
            class="absolute -top-2 -right-2 bg-[#E91E63] text-white text-xs rounded-full h-5 w-5 flex items-center justify-center"
            >0</span
          >
        </a>
      </div>
    </div>
  </div>
</nav>
