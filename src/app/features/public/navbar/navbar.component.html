<top-social-bar *ngIf="isVisible()"/>

<!-- Barra de navegacion -->
<nav *ngIf="isVisible()" #navbar class="bg-white border-b border-[#E0E0E0] sticky top-0 z-50">
  <div class="container mx-auto px-4">
    <div class="flex items-center justify-between h-24">
      <!-- Logo -->
      <a
        routerLink="/"
        class="flex-shrink-0 transform hover:scale-105 transition-transform duration-200"
      >
        <image-control
          src="https://res.cloudinary.com/djy0fxyoq/image/upload/v1741215143/logo_ix9ohv.webp"
          alt="HOLAA Trendy"
          imageClass="h-16 md:h-20 me-5"
        />
      </a>

      <!-- Link de navegacion -->
      <div class="hidden lg:flex items-center space-x-10">
        <navigation-link
          text="Mas vendidos"
          [hasIconClass]="true"
          iconClass="icon-[noto--fire]"
          fragment="bestSellers"
          link="/"
        />

        <navigation-link
          text="Mega ofertas"
          [hasIconClass]="true"
          iconClass="icon-[streamline--discount-percent-badge-solid]"
          fragment="bestOffers"
          link="/"
        />

        <navigation-link
          text="Recien Llegados"
          [hasIconClass]="true"
          iconClass="icon-[twemoji--new-button]"
          fragment="newArrivals"
          link="/"
        />
      </div>

      <div class="flex-1 max-w-2xl mx-10 relative">
        <control-search-products
          (onSearchForm)="onSearch($event)"
          [showResults]="showResults"
          [products]="products"
        />
      </div>

      <!-- Right Icons -->
      <div class="flex items-center space-x-8">
        <div class="relative group">
          @if(isAuth()) {
            <image-control src="https://avatar.iran.liara.run/public/93" alt="Avatar" imageClass="h-8 w-8 rounded-full" />
          } @else {
            <icon-link-control icon="icon-[hugeicons--user]" link="auth/login" />
          }
          
          <!-- Menú desplegable -->
          <div
            *ngIf="isAuth()"
            class="absolute right-0 mt-2 w-48 bg-white rounded-md shadow-lg py-1 z-10 invisible group-hover:visible opacity-0 group-hover:opacity-100 transition-all duration-300 transform scale-95 group-hover:scale-100"
          >
            <a
              routerLink="/profile"
              class="block px-4 py-2 text-sm text-gray-700 hover:bg-[#E91E63] hover:text-white transition-colors"
            >
              Ver Perfil
            </a>
            <button
              (click)="logout()"
              class="w-full text-left px-4 py-2 text-sm text-gray-700 hover:bg-[#E91E63] hover:text-white transition-colors"
            >
              Cerrar Sesión
            </button>
          </div>
        </div>

        <!-- <icon-link-control
          iconFilled="icon-[mdi--heart]"
          icon="icon-[mdi--heart-outline]"
          link="/wishlist"
        /> -->

        <icon-link-control
          icon="icon-[hugeicons--shopping-bag-02]"
          link="/cart"
        />
      </div>
    </div>
  </div>
</nav>
